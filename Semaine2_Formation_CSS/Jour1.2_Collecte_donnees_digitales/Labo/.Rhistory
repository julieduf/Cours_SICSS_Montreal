data_papers %>%
mutate(full_url = str_glue("https://guides.loc.gov/federalist-papers/text-1-10", url, sep = ""))
data_papers <-
data_papers %>%
mutate(full_url = str_c("https://guides.loc.gov/federalist-papers/text-1-10", url, sep = ""))
View(data_papers)
data_papers$full_url[1]
webpage2 <- read_html("https://guides.loc.gov/federalist-papers/text-1-10#s-lg-box-wrapper-25493264")
webpage2
texte1 <-
webpage2 %>%
html_nodes(css = ".s-lg-box-wrapper-25493264 .s-lib-box-std") %>%
html_text() %>%
str_squish()
texte1
data_papers$full_url[1]
texte1 <-
webpage2 %>%
html_nodes(css = ".s-lg-box-wrapper-25493264") %>%
html_text() %>%
str_squish()
texte1
nav_results_list <- tibble(
html_result = map(data_papers$url[1:3],
~ {
Sys.sleep(2)
.x %>%
read_html()
}),
summary_url = data_papers$url[1:3]
)
nav_results_list <- tibble(
html_result = map(data_papers$full_url[1:3],
~ {
Sys.sleep(2)
.x %>%
read_html()
}),
summary_url = data_papers$full_url[1:3]
)
View(nav_results_list)
nav_results_list$html_result[[1]]
nav_results_list$html_result[[2]]
View(nav_results_list)
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
url =
map(nav_results_list$html_results,
~ .x %>%
html_nodes("#setwidth li a") %>%
html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes("#setwidth li a") %>%
html_text()
)
)
nav_results_list$html_result[[2]]
nav_results_list$html_result[[2]][1]
nav_results_list$html_result[[2]][2]
nav_results_list$html_result[[2]][3]
nav_results_list$html_result[[2]]
nav_results_list$html_result[[1]]
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_text()
)
)
url1 <-
webpage2 %>%
html_nodes(css = ".s-lg-box-wrapper-25493264") %>%
html_attr("href")
url1
texte1
url1
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_text()
)
)
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_text()
)
)
nav_results_list$html_result[[1]]
View(data_papers)
View(nav_results_list)
nav_results_list <- tibble(
html_result = map(data_papers$full_url[1:3],
~ {
Sys.sleep(2)
.x %>%
read_html()
}),
summary_url = data_papers$full_url[1:3],
summary_short_url = str_extract(data_papers$url[1:3])
)
View(nav_results_list)
View(nav_results_list)
nav_results_list <- tibble(
html_result = map(data_papers$full_url[1:3],
~ {
Sys.sleep(2)
.x %>%
read_html()
}),
summary_url = data_papers$full_url[1:3]
summary_short_url = str_extract(data_papers$url[1:3])
nav_results_list <- tibble(
html_result = map(data_papers$full_url[1:3],
~ {
Sys.sleep(2)
.x %>%
read_html()
}),
summary_url = data_papers$full_url[1:3],
summary_short_url = data_papers$url[1:3]
)
View(nav_results_list)
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
summary_short_url =
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_text()
)
)
nav_results_list$summary_short_url
nav_results_list$summary_short_url <- str_replace(nav_results_list$summary_short_url, "\\#", ".")
nav_results_list$summary_short_url
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_text()
)
)
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results,
~ .x %>%
html_nodes(nav_results_list$summary_short_url[1:3]) %>%
html_text()
)
)
nav_results_list$html_results
nav_results_list$html_results
View(nav_results_list)
nav_results_list$html_result[[1]]
nav_results_list$html_result[[1]][[2]]
nav_results_list$html_result[[1]][[2]][1]
nav_results_list$html_result[[1]]
webpage2
View(nav_results_list)
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
#url =
#  map(nav_results_list$html_results,
#      ~ .x %>%
#        html_nodes(".s-lg-box-wrapper-25493264") %>%
#        html_attr("href")),
name =
map(nav_results_list$html_results[1:3],
~ .x %>%
html_nodes(nav_results_list$summary_short_url[1:3]) %>%
html_text()
)
)
nav_results_list$html_result[[1:3]]
nav_results_list$html_result[[1]]
nav_results_list$html_result[[1]]
nav_results_list$html_results[[1]]
View(nav_results_list)
nav_results_list$html_result[[1]]
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_attr("href")),
name =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_text()
)
)
results_by_page
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_attr("href")),
name =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_text()
)
)
results_by_page
nav_results_list$summary_short_url
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_attr("href")),
name =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(".s-lg-box-wrapper-25493264") %>%
html_text()
)
)
results_by_page
View(results_by_page)
results_by_page
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_attr("href")),
name =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_text()
)
)
View(results_by_page)
nav_results_list$summary_short_url
results_by_page <- tibble(summary_url = nav_results_list$summary_url,
last_d = str_extract(nav_results_list$summary_url, pattern = "\\d+$"),
url =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url) %>%
html_attr("href")),
name =
map(nav_results_list$html_result,
~ .x %>%
html_nodes(nav_results_list$summary_short_url[1:3]) %>%
html_text()
)
)
nav_results_list$html_result
nav_results_list$summary_short_url
View(nav_results_list)
webpage_er <- read_html("https://www.vondel.humanities.uva.nl/ecartico/persons/index.php?subtask=browse")
rm(list = ls())
webpage_er <- read_html("https://www.vondel.humanities.uva.nl/ecartico/persons/index.php?subtask=browse")
rm(list = ls())
results <- read_html("https://www.vondel.humanities.uva.nl/ecartico/persons/index.php?subtask=browse")
name <-
results %>%
html_nodes(css = "#setwidth li a") %>%
html_text()
name
url <-
results %>%
html_attr(css = "#setwidth li a") %>%
html_text("href")
url <-
results %>%
html_nodes(css = "#setwidth li a") %>%
html_attr("href")
url
results_df <- tibble(name, url)
results_df
results %>% #html_nodes("div.subnav")
html_nodes("form+ .subnav") %>%
html_text()
results %>% #html_nodes("div.subnav")
html_nodes("form+ .subnav .active , form+ .subnav a") %>%
html_text()
results %>% #html_nodes("div.subnav")
html_nodes("form+ .subnav") %>%
html_text()
results %>% #html_nodes("div.subnav")
html_nodes("form+ .subnav .active , form+ .subnav a") %>%
html_text()
results %>% #html_nodes("div.subnav")
html_nodes("form+ .subnav") %>%
html_text()
navigation <- results %>%
html_nodes("form+ .subnav a") %>%
html_attr("href")
navigation
nav_df <- tibble(navigation)
nav_df
View(nav_df)
nav_df
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df
View(nav_df)
nav_df
nav_df <- nav_df %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
nav_df
View(nav_df)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df
nav_df <- nav_df %>%
mutate(navigation1 = navigation)
nav_df <- tibble(navigation)
nav_df
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
View(nav_df)
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1))
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)"))
nav_df$navigation[1]
nav_df$navigation1[1]
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, "\\=\\d+$"))
nav_df$navigation[1]
nav_df$navigation1[1]
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1")))
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1")))
nav_df <- tibble(navigation)
nav_df
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1))
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
nav_df
View(nav_df)
nav_df$url[1]
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
#transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
transmute(url = glue::glue("{navigation}={page_no}"))
nav_df
nav_df$url[1]
nav_df$url[2]
nav_df <- tibble(navigation)
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
#transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
transmute(url = glue::glue("http://{navigation}={page_no}"))
nav_df$url[2]
View(nav_df)
nav_results_list <- tibble(
html_results = map(nav_df$url[1:3],
~ {
#url[1:3] - limiting to the first three summary results pages (each page = 50 results)
Sys.sleep(2)
# DO THIS!  sleep 2 will pause 2 seconds between server requests to avoid being identified and potentially blocked by my target web server that might see my crawling bot as a DNS attack.
.x %>%
read_html()
}),
summary_url = nav_df$url[1:3]
)
nav_df <- tibble(navigation)
nav_df
nav_df <- nav_df %>%
filter(str_detect(navigation, "&page=")) %>%
mutate(page_no = str_extract(navigation, "\\d+$")) %>%
mutate(page_no = as.numeric(page_no))
nav_df
nav_df <- nav_df %>%
mutate(navigation1 = navigation) %>%
mutate(navigation = str_extract(navigation, ".*(?=\\=\\d+$)")) %>%
mutate(page_no = as.integer(str_replace(page_no, "^2$", "1"))) %>%
expand(navigation, page_no = full_seq(page_no, 1)) %>%
transmute(url = glue::glue("http://www.vondel.humanities.uva.nl{navigation}={page_no}"))
nav_results_list <- tibble(
html_results = map(nav_df$url[1:3],
~ {
#url[1:3] - limiting to the first three summary results pages (each page = 50 results)
Sys.sleep(2)
# DO THIS!  sleep 2 will pause 2 seconds between server requests to avoid being identified and potentially blocked by my target web server that might see my crawling bot as a DNS attack.
.x %>%
read_html()
}),
summary_url = nav_df$url[1:3]
)
